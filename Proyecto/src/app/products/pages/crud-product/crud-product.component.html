<div class="container mx-auto p-4 bg-white">
  <h2 class="text-xl font-semibold mb-4">{{ isEditing ? 'Editar Producto' : 'Crear Producto' }}</h2>
  <form (ngSubmit)="createOrUpdateProduct()" class="mb-6">
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Título:</label>
      <input [(ngModel)]="product.title" name="title" required class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
    </div>
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Precio:</label>
      <input type="number" [(ngModel)]="product.price" name="price" required min="0" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
    </div>
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Stock:</label>
      <input type="number" [(ngModel)]="product.stock" name="stock" required min="0" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
    </div>
    <button type="submit" class="mr-2 inline-flex items-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
      {{ isEditing ? 'Actualizar' : 'Crear' }}
    </button>

  </form>

  <hr class="my-6">

  <h2 class="text-xl font-semibold mb-4">Lista de Productos</h2>
  <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
    <table class="w-full text-sm text-left rtl:text-right text-gray-500">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3">Título</th>
          <th scope="col" class="px-6 py-3">Precio</th>
          <th scope="col" class="px-6 py-3">Stock</th>
          <th scope="col" class="px-6 py-3"><span class="sr-only">Acciones</span></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }" class="bg-white border-b">
          <td class="px-6 py-4 font-medium text-gray-900">{{ product.title }}</td>
          <td class="px-6 py-4">{{ product.price | currency }}</td>
          <td class="px-6 py-4">{{ product.stock }}</td>
          <td class="px-6 py-4 text-right">
            <button (click)="editProduct(product)" class="mr-2 text-blue-600 hover:underline">Editar</button>
            <button (click)="deleteProduct(product.id ?? '')" class="text-red-600 hover:underline">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="flex justify-between mt-4">
    <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
  </div>

  <div *ngIf="products.length === 0" class="mt-4 text-gray-500">
    No hay productos agregados aún.
  </div>
</div>
